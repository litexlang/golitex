import "/Users/shenjiachen/Desktop/GeekGems/litex/golitex/examples/comprehensive_examples/vector.lit"

# 互相不平行的非零向量是平面的基

exist_prop c1, c2 R st write_vec_by_bases(to_write cart(R, R), base1 cart(R, R), base2 cart(R, R)):
    to_write = sm(c1, base1) \add sm(c2, base2)

prop are_bases(base1 cart(R, R), base2 cart(R, R)):
    forall x cart(R, R) => $write_vec_by_bases(x, base1, base2)

prove forall base1, base2 cart(R, R): base1[1] * base2[2] != base1[2] * base2[1], mod(base1) != 0, mod(base2) != 0 => $are_bases(base1, base2):
    prove forall x cart(R, R) => $write_vec_by_bases(x, base1, base2):
        have c1 R = (x[1] * base2[2] - x[2] * base2[1]) / (base1[1] * base2[2] - base1[2] * base2[1])
        have c2 R = (x[2] * base1[1] - x[1] * base1[2]) / (base1[1] * base2[2] - base1[2] * base2[1])
        
        # 计算 sm(c1, base1) 和 sm(c2, base2) 的坐标表达式
        sm(c1, base1) = (c1 * base1[1], c1 * base1[2])
        sm(c2, base2) = (c2 * base2[1], c2 * base2[2])

        sm(c1, base1) \add sm(c2, base2) = (c1 * base1[1], c1 * base1[2]) \add (c2 * base2[1], c2 * base2[2]) = (c1 * base1[1] + c2 * base2[1], c1 * base1[2] + c2 * base2[2]) = ((x[1] * base2[2] - x[2] * base2[1]) / (base1[1] * base2[2] - base1[2] * base2[1]) * base1[1] + (x[2] * base1[1] - x[1] * base1[2]) / (base1[1] * base2[2] - base1[2] * base2[1]) * base2[1], (x[1] * base2[2] - x[2] * base2[1]) / (base1[1] * base2[2] - base1[2] * base2[1]) * base1[2] + (x[2] * base1[1] - x[1] * base1[2]) / (base1[1] * base2[2] - base1[2] * base2[1]) * base2[2]) = (x[1], x[2])
        
        x[1] = (sm(c1, base1) \add sm(c2, base2))[1]
        x[2] = (sm(c1, base1) \add sm(c2, base2))[2]

        (sm(c1, base1) \add sm(c2, base2)) $in cart(R, R)

        $equal_tuple(x, sm(c1, base1) \add sm(c2, base2), 2)

        exist c1, c2 st $write_vec_by_bases(x, base1, base2)