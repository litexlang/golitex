# Litex 多项式自动标准化

Litex 会自动把多项式整理成标准形式（canonical form），以便让用户方便地证明等式。比如：
```
(x + 1) * (x + 2) = x^2 + 3 * x + 2
```

这个功能非常重要。如果这些功能不放在内核里，那这些最最基本的计算，也要用 forall + 匹配和替换 的方式去证明，会非常冗余。

## Litex 内核证明多项式相等的方式

### 1. 合并同类项
将相同变量和指数的项合并，比如：
```
x^2 + 2*x^3 + 3*x^2 = 2*x^3 + 4*x^2
```

### 2. 按总指数（degree）从大到小排序
先比较每一项的总指数，指数大的排在前面，比如：
```
x + 2*x^3 + x^2 = 2*x^3 + x^2 + x
```

### 3. 总指数相同时，按字典序（lexicographic order）排列
当多个项的总指数相同时，按变量的字典序排列（UTF-8字符串比较）：
- 逐位比较变量名
- 对于每个变量，在单项式内按指数从大到小排列
- 单项式之间按字典序比较

**示例：**
```
x^4 + x^2*y^2 + x + y^4 + y^3 + y
```
标准化后（总指数相同时按字典序）：
```
x^4 + x^2*y^2 + y^4 + y^3 + x + y
```

解释：
- `x^4`: 总指数 4
- `x^2*y^2`: 总指数 4，与 x^4 同级，但按字典序 "x" < "y"，所以 x^2*y^2 排在 y^4 前面
- `y^4`: 总指数 4
- `y^3`: 总指数 3
- `x`: 总指数 1，"x" < "y"（字典序）
- `y`: 总指数 1

### 4. 展开和标准化
自动展开括号并标准化，确保数学上相等的多项式字符串表示完全一致：
```
(x + y)^2 = x^2 + 2*x*y + y^2
```

## 实现细节

当前实现位于 `number/num_artihmetic.go`，核心步骤：
1. **词法分析（Tokenization）**：将表达式分解为 token
2. **语法分析（Parsing）**：构建 AST
3. **求值（Evaluation）**：展开多项式
4. **合并同类项（Simplify）**：合并并排序
5. **标准化输出**：按上述规则输出

排序算法的关键比较函数应该：
1. 先比较总指数（degree）
2. 总指数相同时，按变量的字典序比较
